# Research: SSBR官能化知识库与智能推荐系统

**Date**: 2026-02-28 | **Branch**: `001-ssbr-knowledge-recommender`

## Research Tasks

基于 Technical Context 分析，识别以下需要研究的问题：

---

### R-001: Skill 文件的组织与调用模式

**Question**: 现有 4 套解读 Skill + 1 套待创建推荐 Skill，如何组织以实现最佳用户体验？

**Research Findings**:

1. **当前架构分析**：
   - 已存在 4 套独立的解读 Skill（DSC、NMR、应力-应变、TEM）
   - 每套 Skill 定义了完整的工作流：自动检索 → 解读 → 标准化输出
   - 固定路径：`/dataset/数据.xlsx` 和 `/literature/`

2. **推荐 Skill 设计方向**：
   - 需要新建 `ssbr-recommender.txt` 作为智能推荐入口
   - 推荐 Skill 需要能够读取 Excel 数据进行匹配
   - 推荐 Skill 输出需要包含文献来源信息

**Decision**: 采用 **5 Skill 独立架构**
- 4 套解读 Skill 保持独立（按表征类型调用）
- 1 套推荐 Skill 作为智能推荐入口
- 用户根据需求选择调用对应 Skill

**Rationale**: 
- 职责分离清晰，便于维护
- 符合现有 Skill 设计模式
- 用户可按需调用，灵活性高

**Alternatives Considered**:
- 统一入口 Skill（一个 Skill 处理所有功能）→ 拒绝：过于复杂，不符合单一职责原则
- 层级调用（推荐 Skill 调用解读 Skill）→ 拒绝：当前 AI 平台不支持 Skill 间调用

---

### R-002: Excel 数据结构与字段映射

**Question**: 如何确保 Excel 数据结构支持推荐系统的匹配需求？

**Research Findings**:

1. **现有 Excel 列分析**（基于 Skill 定义推断）：
   - 样本唯一 ID
   - 官能化试剂名称
   - 核心官能团
   - 官能化程度
   - 应用场景
   - 文献 DOI
   - 图注信息（核磁谱图、微相分离图片、应力-应变曲线、DSC谱图）
   - 引文信息
   - 力学性能数据（100%/200%/300%定伸应力、拉伸强度、断裂伸长率）
   - 热学性能数据（Tg）

2. **推荐匹配所需字段**：
   - 应用场景（场景过滤）
   - 100%定伸应力、200%定伸应力、Tg 等（性能匹配）
   - 官能化试剂、核心官能团、官能化程度（推荐输出）
   - 文献 DOI、第一作者、年份（来源追溯）

**Decision**: **当前 Excel 结构基本满足需求**，但需要在 data-model.md 中明确：
- 必填字段 vs 可选字段
- 字段格式规范（单位、精度）
- 数据来源层级标注方式

**Rationale**: 
- 复用现有数据结构，降低迁移成本
- 明确规范确保数据质量

---

### R-003: 推荐匹配算法设计

**Question**: 如何在无编程环境下实现性能指标匹配？

**Research Findings**:

1. **匹配场景分析**：
   - 精确值匹配：`100%定伸应力=4.0MPa`
   - 范围匹配：`100%定伸应力在3.5-4.5MPa之间`
   - 偏差容忍匹配：`100%定伸应力=4.0MPa ±10%`

2. **AI 平台能力**：
   - AI 可以理解自然语言中的数值和范围
   - AI 可以执行数值比较和计算
   - AI 可以读取 Excel 数据进行筛选

**Decision**: **基于 Skill 规则的自然语言匹配**
- 在推荐 Skill 中明确匹配规则
- 依赖 AI 平台的数值理解和计算能力
- 无需编程实现算法

**Rationale**: 
- 符合轻量化原则
- AI 平台已具备足够的数值处理能力
- 通过 Skill 规则约束匹配行为

---

### R-004: 推荐结果排序机制

**Question**: 如何实现按匹配度排序？

**Research Findings**:

1. **匹配度定义**：
   - 完全匹配（精确值或落在范围内）
   - 偏差匹配（在用户设置的容忍范围内）
   - 多指标联合匹配（同时满足多个条件）

2. **排序规则**：
   - 完全匹配 > 偏差匹配
   - 偏差越小排序越靠前
   - 多指标全满足 > 部分满足

**Decision**: **在 Skill 中定义排序规则，由 AI 执行**
- 规则1：完全匹配的结果排在偏差匹配之前
- 规则2：偏差匹配按偏差百分比从小到大排序
- 规则3：相同偏差时，按数据来源层级排序（Level 1 > Level 2 > Level 3）

**Rationale**: 
- 规则明确，AI 可准确执行
- 考虑了数据质量因素（来源层级）

---

### R-005: 错误处理与边缘情况

**Question**: 如何处理各类异常情况？

**Research Findings**:

1. **已在现有 Skill 中定义的错误处理**：
   - Excel 行/字段不存在
   - PDF 文献未找到
   - 图片/表格未找到

2. **推荐 Skill 需要的额外错误处理**：
   - 知识库为空
   - 无匹配结果
   - 性能指标字段缺失

**Decision**: **在推荐 Skill 中补充错误处理规则**
- 知识库为空：返回「知识库暂无数据，请先录入样本数据」
- 无匹配结果：返回「未找到满足条件的官能化方案」
- 字段缺失：该样本排除在匹配范围外，不报错

**Rationale**: 
- 符合「无确凿不输出」原则
- 提供明确的用户反馈

---

## Summary of Decisions

| ID | Topic | Decision |
|----|-------|----------|
| R-001 | Skill 组织模式 | 5 Skill 独立架构（4 解读 + 1 推荐） |
| R-002 | Excel 数据结构 | 复用现有结构，明确字段规范 |
| R-003 | 匹配算法 | 基于 Skill 规则的自然语言匹配 |
| R-004 | 排序机制 | 完全匹配 > 偏差匹配 > 来源层级 |
| R-005 | 错误处理 | 在 Skill 中定义明确的错误响应 |

---

## Open Items (None)

所有研究问题已解决，无待澄清项。可进入 Phase 1。
