# 数据结构迁移指南

**Date**: 2026-02-28 | **Purpose**: 指导用户将现有 Excel 数据结构调整为符合 data-model.md 规范

**最后更新**: 2026-02-28 - 实施方案 B（保存核心性能数值）

---

## ✅ 已完成的调整

| 操作 | 状态 |
|------|------|
| 新增「样本ID」列（A 列） | ✅ 已完成 |
| 自动填充 SSBR-001 至 SSBR-004 | ✅ 已完成 |
| 重命名「SSBR 应用」→「应用场景」| ✅ 已完成 |
| 新增「核心官能团名称」列（Col 6） | ✅ 已完成 |
| 新增「核心官能团化学式」列（Col 7） | ✅ 已完成 |
| 新增「DOI_SI」列（DOI 列之后） | ✅ 已完成 |
| 新增力学性能数据列（6 列） | ✅ 已完成 |
| 新增热学性能数据列（2 列） | ✅ 已完成 |
| 修正 SMILES 数据 | ✅ 已完成 |

---

## 📋 当前 Excel 结构（共 23 列）

`/dataset/数据.xlsx` 当前列结构：

| # | 列名 | 说明 | 数据来源 |
|---|------|------|----------|
| 1 | **样本ID** | 唯一标识符 | 自动生成 |
| 2 | **应用场景** | 用途分类 | 手动填写 |
| 3 | 官能化试剂名称 | 试剂名称 | 手动填写 |
| 4 | 试剂整体 SMILES | 分子结构 | 手动填写 |
| 5 | 核心官能团 SMILES | 官能团结构 | 手动填写 |
| **6** | **核心官能团名称** | 官能团中文名 | 手动填写 |
| **7** | **核心官能团化学式** | 官能团化学式 | 手动填写 |
| 8 | 官能化程度 | 接枝百分比 | 手动填写 |
| 9 | 核磁谱图 | 图注信息 | 手动填写 |
| 10 | 微相分离图片表征 | 图注信息 | 手动填写 |
| 11 | 应力-应变曲线 | 图注信息 | 手动填写 |
| 12 | DSC 谱图 | 图注信息 | 手动填写 |
| 13 | 引文 | 文献来源 | 手动填写 |
| 14 | DOI | 文献标识 | 手动填写 |
| **15** | **DOI_SI** | SI补充材料标识 | 自动生成/手动填写 |
| **16** | **100%定伸应力(MPa)** | 力学性能 | 🤖 解读 Skill 提取 |
| **17** | **200%定伸应力(MPa)** | 力学性能 | 🤖 解读 Skill 提取 |
| **18** | **300%定伸应力(MPa)** | 力学性能 | 🤖 解读 Skill 提取 |
| **19** | **拉伸强度(MPa)** | 力学性能 | 🤖 解读 Skill 提取 |
| **20** | **断裂伸长率(%)** | 力学性能 | 🤖 解读 Skill 提取 |
| **21** | **力学数据来源** | Level 标注 | 🤖 解读 Skill 提取 |
| **22** | **Tg(℃)** | 热学性能 | 🤖 解读 Skill 提取 |
| **23** | **热学数据来源** | Level 标注 | 🤖 解读 Skill 提取 |

---

## 🔄 方案 B 工作流程

您选择的方案：**保存核心性能数值，详细解读实时生成**

```
┌─────────────────────────────────────────────────────────────┐
│                    数据录入工作流                            │
└─────────────────────────────────────────────────────────────┘

第一步：准备基础数据
┌─────────────────┐
│  1. 放置 PDF    │  将文献 PDF 放入 /literature/ 文件夹
│     文件        │  命名格式：{DOI}_{作者}_{年份}.pdf
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  1.5 放置 SI    │  将文献补充材料 PDF 放入 /literature_SI/ 文件夹
│      文件       │  命名格式：{DOI}_{作者}_{年份}_SI.pdf
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  2. 填写 Excel  │  填写 Col 2-12：应用场景、官能化试剂、
│     基础信息    │  图注信息、DOI 等（DOI_SI 自动生成）
└────────┬────────┘
         │
         ▼
第二步：使用 AI 提取性能数据
┌─────────────────┐
│  3. 调用应力-   │  "请解读第 X 行样本的应力-应变曲线"
│     应变解读    │  
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  4. 复制力学    │  将输出的数值填入 Col 14-19
│     数据到Excel │  100%/200%/300%定伸应力、拉伸强度、断裂伸长率
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  5. 调用 DSC    │  "请解读第 X 行样本的 DSC 谱图"
│     解读        │  
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  6. 复制热学    │  将输出的 Tg 值填入 Col 20-21
│     数据到Excel │  
└─────────────────┘

完成！该样本数据已可用于智能推荐匹配
```

---

## 📝 数据填写示例

### 调用解读 Skill 后的输出示例：

**应力-应变解读输出：**
```
## 核心力学性能数据
| 指标 | 数值 | 数据来源 |
|------|------|----------|
| 100%定伸应力 | 1.8 MPa | Table 1 |
| 200%定伸应力 | 3.5 MPa | Table 1 |
| 300%定伸应力 | 6.2 MPa | Table 1 |
| 拉伸强度 | 15.2 MPa | Table 1 |
| 断裂伸长率 | 450% | Table 1 |
```

**对应填入 Excel：**

| Col 14 | Col 15 | Col 16 | Col 17 | Col 18 | Col 19 |
|--------|--------|--------|--------|--------|--------|
| 1.8 | 3.5 | 6.2 | 15.2 | 450 | Table 1 |

---

## 💡 数据来源层级说明

| 层级 | 标注方式 | 说明 | 推荐优先级 |
|------|----------|------|-----------|
| **L1** | `Table 1` / `SI Table S5` | 文献主文献或SI补充材料表格明确数值 | ⭐⭐⭐ 最高 |
| **L2** | `图面标注` | 图中直接标注的数值 | ⭐⭐ |
| **L3** | `曲线估读` | 从曲线图估读 | ⭐ |
| **L4** | `-` | 文献未提供 | 不参与匹配 |

---

## ⚠️ 缺失数据处理

当文献中无某项数据时：

| 情况 | 填写方式 |
|------|----------|
| 文献未提供该数据 | 填 `-` |
| 样品在该应变下已断裂 | 填 `样品断裂` |
| 数据为区间值 | 填 `1.5-2.0` |

---

## 📚 相关文档

- [数据模型规范](./data-model.md)
- [Skill 接口契约](./contracts/skill-interfaces.md)
- [快速入门指南](./quickstart.md)
