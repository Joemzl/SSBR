# Feature Specification: SSBR官能化知识库与智能推荐系统

**Feature Branch**: `001-ssbr-knowledge-recommender`  
**Created**: 2026-02-28  
**Status**: Draft  
**Input**: 用户描述构建SSBR官能化个人知识库与智能推荐系统

## Clarifications

### Session 2026-02-28

- Q: 用户交互界面形式？ → A: AI对话助手技能（Skill）- 作为大模型的专属技能调用，用户通过自然语言对话与系统交互
- Q: 知识库数据存储位置与格式？ → A: 直接使用现有 Excel 文件 (`/dataset/数据.xlsx`) 作为唯一数据存储，数据结构需兼容未来数据库迁移

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 智能方案推荐查询 (Priority: P1)

作为一名SSBR材料研究人员，我希望通过描述目标应用场景和期望的性能指标（如100%定伸应力、Tg），系统能够从知识库中匹配并推荐合适的官能化方案（包括官能化试剂、核心官能团、官能化程度），并提供文献支撑信息，以便我快速筛选研究方向。

**Why this priority**: 这是系统的核心价值主张——帮助研究人员基于真实文献数据快速定位官能化方案，直接服务于科研决策。

**Independent Test**: 用户输入目标性能指标，系统返回带有完整文献来源的推荐结果，可独立验证推荐的准确性和可追溯性。

**Acceptance Scenarios**:

1. **Given** 知识库中已存在若干官能化样本数据，**When** 用户输入"我想用SSBR做轮胎胎面，希望100%定伸应力达到4.0MPa、Tg达到-30℃"，**Then** 系统返回按匹配度排序的推荐列表，每条结果包含：官能化试剂名称、核心官能团、官能化程度、实测性能数据、文献DOI来源。

2. **Given** 用户指定性能范围（如100%定伸应力在3.5-4.5MPa之间），**When** 提交查询，**Then** 系统返回落在该范围内的所有匹配方案，并标注各方案与目标值的偏差程度。

3. **Given** 用户查询的性能指标在知识库中无精确匹配，**When** 允许±10%偏差容忍，**Then** 系统返回偏差范围内的方案并明确标注"偏差匹配"。

4. **Given** 知识库中无任何满足条件的方案，**When** 用户发起查询，**Then** 系统返回"未找到匹配方案"提示，不输出任何猜测性内容。

---

### User Story 2 - 表征图片自动解读 (Priority: P2)

作为知识库维护者，我希望系统能够根据Excel数据集中的DOI和图注信息，自动定位文献中的表征图片（¹H核磁谱图、TEM微相分离图片、应力-应变曲线、DSC谱图），并按照标准化格式输出解读结果，以便我无需手动上传文件即可批量录入数据。

**Why this priority**: 自动化解读是知识库扩充的核心能力，直接影响数据录入效率和数据质量。

**Independent Test**: 指定一条Excel数据记录，系统自动完成文献匹配、图片定位、解读输出全流程，输出内容可直接粘贴到Excel对应列。

**Acceptance Scenarios**:

1. **Given** Excel数据集中存在一条记录，包含DOI="10.1039/c9ra02783a"和DSC谱图图注="Figure 5a"，**When** 用户触发解读，**Then** 系统自动定位本地文献库中的对应PDF，找到Figure 5a，输出符合标准格式的DSC解读结果。

2. **Given** 文献中图片标注了精确的Tg数值，**When** 解读DSC谱图，**Then** 输出精确数值并标注"数据来源：图面标注"。

3. **Given** 文献图片仅有玻璃化转变台阶但无数值标注，**When** 解读DSC谱图，**Then** 输出温度区间（如"-30℃至-20℃之间"）而非估算的单一数值。

4. **Given** 目标图片在文献中不存在或图注信息错误，**When** 系统尝试定位，**Then** 返回"未找到目标图片"错误提示，不输出任何虚构内容。

---

### User Story 3 - 知识库数据浏览与管理 (Priority: P3)

作为知识库用户，我希望能够浏览知识库中已有的官能化方案数据，包括各样本的官能化信息、性能数据、表征解读结论和文献来源，以便我全面了解当前数据集覆盖范围。

**Why this priority**: 数据浏览是用户理解知识库内容、发现数据缺口的基础功能。

**Independent Test**: 用户可以查看知识库中所有数据条目，每条数据展示完整的结构化信息。

**Acceptance Scenarios**:

1. **Given** 知识库中存在多条官能化样本数据，**When** 用户请求查看全部数据，**Then** 系统展示数据列表，包含官能化试剂、核心官能团、官能化程度、应用场景、力学性能、热学性能、文献来源。

2. **Given** 用户希望按特定字段筛选，**When** 用户设置筛选条件（如"官能化试剂=APTES"），**Then** 系统返回符合条件的数据子集。

3. **Given** 用户点击某条数据的详情，**When** 展开详情，**Then** 显示该样本的完整表征解读信息（核磁、TEM、应力-应变、DSC的标准化解读结论）。

---

### User Story 4 - 知识库数据录入 (Priority: P4)

作为知识库维护者，我希望能够将新的官能化样本数据（包括解读结果）录入知识库，并确保数据与现有结构兼容，以便持续扩充知识库内容。

**Why this priority**: 数据录入是知识库持续扩展的保障，但依赖于解读功能（P2）的完成。

**Independent Test**: 新增一条样本数据，系统接受并存储，后续查询可检索到该数据。

**Acceptance Scenarios**:

1. **Given** 用户准备好一条新的样本数据（含所有必填字段），**When** 提交录入，**Then** 系统验证数据格式后成功存储。

2. **Given** 用户提交的数据缺少必填字段，**When** 尝试录入，**Then** 系统返回明确的错误提示，指出缺少哪些字段。

3. **Given** 数据录入成功，**When** 用户执行推荐查询，**Then** 新录入的数据参与匹配计算。

---

### Edge Cases

- **文献PDF文件不存在**：当DOI对应的PDF文件未存放在本地文献库时，系统MUST返回明确错误提示"文献PDF未找到：[DOI]"，不得尝试从网络下载或输出任何猜测内容。

- **图注信息错误或模糊**：当Excel中的图注信息（如"Figure 5"）在文献中对应多个子图（5a, 5b, 5c）时，系统MUST请求用户澄清具体子图编号。

- **性能数据缺失**：当知识库中某样本缺少用户查询的性能指标（如无Tg数据）时，该样本MUST被排除在匹配结果之外，不得用估算值填充。

- **知识库为空**：当知识库中无任何数据时，推荐查询MUST返回"知识库暂无数据"提示。

- **数值单位不一致**：系统MUST统一使用标准单位（应力：MPa；温度：℃），对非标准单位的输入进行转换或提示。

## Requirements *(mandatory)*

### Functional Requirements

**知识库存储**

- **FR-001**: 系统MUST支持结构化存储SSBR官能化样本数据，包含以下核心字段：官能化试剂名称、核心官能团、官能化程度、应用场景、力学性能数据、热学性能数据、文献DOI、表征图注信息。

- **FR-002**: 系统MUST支持存储四类表征解读结果：¹H核磁谱图解读、TEM微相分离图片解读、应力-应变曲线解读、DSC谱图解读，每类解读结果需与Excel数据集列一一对应。

- **FR-003**: 系统MUST支持存储本地PDF文献路径，文件命名规范为 `DOI_第一作者_年份.pdf`（DOI中的`/`替换为`_`）。

**自动化解读**

- **FR-004**: 系统MUST能够根据Excel数据集中的DOI信息自动匹配本地文献库中的PDF文件。

- **FR-005**: 系统MUST能够根据Excel数据集中的图注信息（如"Figure 3a"）自动定位PDF文献中的目标图片。

- **FR-006**: 系统MUST提供四套标准化解读技能，分别对应¹H核磁谱图、TEM微相分离图片、应力-应变曲线、DSC谱图，每套技能输出固定格式的解读结果。

- **FR-007**: 解读技能MUST遵循"显式数据优先、隐式数据区间化、不可观测项绝对舍弃"原则，禁止编造或估算任何无法从文献直接获取的数据。

- **FR-008**: 解读输出格式MUST与Excel数据集的列结构完全对应，确保可直接录入知识库无需二次整理。

**智能推荐**

- **FR-009**: 系统MUST支持用户通过自然语言描述目标应用场景和性能指标发起推荐查询。

- **FR-010**: 推荐系统MUST优先锁定用户指定的应用场景，再在该场景下执行性能指标匹配。

- **FR-011**: 系统MUST支持用户输入性能指标的精确值或数值范围（如"100%定伸应力=4.0MPa"或"100%定伸应力在3.5-4.5MPa之间"）。

- **FR-012**: 系统MUST支持用户设置匹配偏差容忍范围（如±5%、±10%）。

- **FR-013**: 推荐结果MUST按匹配度从高到低排序输出。

- **FR-014**: 每条推荐结果MUST包含：官能化试剂名称、核心官能团、推荐官能化程度、实测性能数据（含单位）、文献来源（DOI、第一作者、年份）。

- **FR-015**: 推荐结果中的方案优劣势说明MUST仅在知识库中存在确凿文献支撑时输出，无支撑信息时仅展示基础推荐结果。

**数据质量保障**

- **FR-016**: 系统MUST拒绝存储或输出任何无文献来源支撑的数据。

- **FR-017**: 系统MUST对所有数据标注来源层级：Level 1（显式标注）、Level 2（正文/表格）、Level 3（区间估读）。

### Key Entities

- **官能化样本 (Functionalized Sample)**: 知识库的核心实体，代表一种官能化SSBR配方。关键属性包括：官能化试剂名称、核心官能团、官能化程度(%)、目标应用场景。

- **力学性能数据 (Mechanical Properties)**: 与样本关联的力学性能测试结果。关键属性包括：100%定伸应力(MPa)、200%定伸应力(MPa)、300%定伸应力(MPa)、拉伸强度(MPa)、断裂伸长率(%)。

- **热学性能数据 (Thermal Properties)**: 与样本关联的热学性能测试结果。关键属性包括：玻璃化转变温度Tg(℃)、高弹性工作温度窗口、其他热转变特征。

- **表征解读 (Characterization Interpretation)**: 与样本关联的四类表征解读结论。包括：¹H核磁解读、TEM解读、应力-应变曲线解读、DSC解读，每类解读遵循标准化输出格式。

- **文献来源 (Literature Source)**: 数据的学术来源。关键属性包括：DOI、第一作者、发表年份、本地PDF路径。

## Assumptions

- **A-001**: 用户已按规定命名规范（`DOI_第一作者_年份.pdf`）整理好本地PDF文献库。
- **A-002**: Excel数据集中的DOI和图注信息准确无误。
- **A-003**: 知识库初期数据量较小（数十至数百条），直接使用 `/dataset/数据.xlsx` 作为唯一数据存储，数据结构设计需兼容未来向 SQLite/PostgreSQL 的迁移。
- **A-004**: 用户为具备高分子材料专业背景的研究人员，熟悉SSBR官能化相关术语。
- **A-005**: 系统仅用于学术研究目的，遵循文献版权许可要求。
- **A-006**: 系统作为AI对话助手的专属技能（Skill）运行，用户通过自然语言对话界面与系统交互，无需独立部署Web界面或CLI工具。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户从输入查询到获得推荐结果的全流程可在30秒内完成（知识库规模≤500条）。

- **SC-002**: 推荐结果的文献可追溯率达到100%——每条推荐结果均包含完整的DOI和文献来源信息。

- **SC-003**: 自动解读功能成功率≥95%——对于格式规范的文献和准确的图注信息，系统能成功完成解读输出。

- **SC-004**: 解读输出的零幻觉率达到100%——所有输出数据均可在原始文献中找到对应来源，无编造或估算内容。

- **SC-005**: 用户使用解读功能后，数据录入时间相比手动整理减少80%以上。

- **SC-006**: 知识库支持持续扩展，新增100条数据后系统响应时间增幅不超过10%。

- **SC-007**: 推荐结果的匹配准确率由用户主观评估达到"满意"或"非常满意"的比例≥90%。
